@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 60 9% 98%;
    --foreground: 215 25% 27%;
    --card: 0 0% 100%;
    --card-foreground: 215 25% 27%;
    --primary: 215 25% 27%;
    --primary-foreground: 60 9% 98%;
    --secondary: 240 5% 45%;
    --secondary-foreground: 60 9% 98%;
    --muted: 240 5% 96%;
    --muted-foreground: 240 5% 45%;
    --accent: 217 91% 60%;
    --accent-foreground: 0 0% 100%;
    --success: 160 84% 39%;
    --success-light: 152 76% 90%;
    --success-foreground: 0 0% 100%;
    --error: 350 89% 60%;
    --error-light: 0 86% 97%;
    --error-foreground: 0 0% 100%;
    --border: 240 6% 90%;
    --input: 240 6% 90%;
    --ring: 217 91% 60%;
  }

  .dark {
    --background: 240 10% 4%;
    --foreground: 60 9% 98%;
    --card: 240 10% 7%;
    --card-foreground: 60 9% 98%;
    --primary: 60 9% 98%;
    --primary-foreground: 240 10% 4%;
    --secondary: 240 4% 46%;
    --secondary-foreground: 60 9% 98%;
    --muted: 240 4% 16%;
    --muted-foreground: 240 5% 65%;
    --accent: 217 91% 60%;
    --accent-foreground: 0 0% 100%;
    --success: 160 84% 39%;
    --success-light: 160 50% 15%;
    --success-foreground: 0 0% 100%;
    --error: 350 89% 60%;
    --error-light: 350 40% 15%;
    --error-foreground: 0 0% 100%;
    --border: 240 4% 16%;
    --input: 240 4% 16%;
    --ring: 217 91% 60%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* 移动端优化 */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .glass-effect {
    @apply bg-white/70 backdrop-blur-md;
  }

  .elegant-card {
    @apply bg-white rounded-xl shadow-elegant border border-zinc-100;
  }

  /* Custom Scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgb(212 212 216 / 0.5) transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(212 212 216 / 0.5);
    border-radius: 3px;
  }

  /* LobeHub 风格闪光文字加载动画 - 优化版 */
  @keyframes shine {
    0% {
      background-position: 200% center;
    }

    100% {
      background-position: -200% center;
    }
  }

  @keyframes typing-glow {

    0%,
    100% {
      opacity: 0.7;
      filter: blur(0px);
    }

    50% {
      opacity: 1;
      filter: blur(0.5px);
    }
  }

  @keyframes cursor-blink {

    0%,
    100% {
      opacity: 1;
      box-shadow: 0 0 8px 2px rgba(59, 130, 246, 0.6);
    }

    50% {
      opacity: 0.3;
      box-shadow: 0 0 4px 1px rgba(59, 130, 246, 0.3);
    }
  }

  @keyframes cursor-pulse {

    0%,
    100% {
      transform: scaleY(1);
    }

    50% {
      transform: scaleY(0.95);
    }
  }

  @keyframes text-appear {
    from {
      opacity: 0.6;
      filter: blur(1px);
    }

    to {
      opacity: 1;
      filter: blur(0);
    }
  }

  .shiny-text {
    background: linear-gradient(90deg,
        rgba(var(--foreground-rgb, 0 0 0) / 0.4) 0%,
        rgba(var(--foreground-rgb, 0 0 0) / 1) 25%,
        rgba(var(--foreground-rgb, 0 0 0) / 1) 50%,
        rgba(var(--foreground-rgb, 0 0 0) / 1) 75%,
        rgba(var(--foreground-rgb, 0 0 0) / 0.4) 100%);
    background-size: 200% auto;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 1.5s linear infinite;
  }

  /* 深色模式下的闪光文字 */
  .dark .shiny-text {
    background: linear-gradient(90deg,
        rgba(255 255 255 / 0.4) 0%,
        rgba(255 255 255 / 1) 25%,
        rgba(255 255 255 / 1) 50%,
        rgba(255 255 255 / 1) 75%,
        rgba(255 255 255 / 0.4) 100%);
    background-size: 200% auto;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 1.5s linear infinite;
  }

  /* 打字机流光尾部效果 - 丝滑渐变版 */
  .typing-glow-tail {
    display: inline;
    position: relative;
    background: linear-gradient(90deg,
        currentColor 0%,
        rgb(99 102 241) 30%,
        rgb(59 130 246) 50%,
        rgb(6 182 212) 70%,
        rgb(34 211 238) 100%);
    background-size: 300% auto;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 2s ease-in-out infinite, typing-glow 1.5s ease-in-out infinite;
  }

  .dark .typing-glow-tail {
    background: linear-gradient(90deg,
        currentColor 0%,
        rgb(165 180 252) 30%,
        rgb(147 197 253) 50%,
        rgb(103 232 249) 70%,
        rgb(165 243 252) 100%);
    background-size: 300% auto;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shine 2s ease-in-out infinite, typing-glow 1.5s ease-in-out infinite;
  }

  /* 打字机光标 - 脉冲光晕效果 */
  .typing-cursor {
    display: inline-block;
    width: 2px;
    height: 1.15em;
    background: linear-gradient(180deg, rgb(59 130 246), rgb(6 182 212));
    margin-left: 2px;
    vertical-align: text-bottom;
    border-radius: 1px;
    animation: cursor-blink 0.9s ease-in-out infinite, cursor-pulse 0.9s ease-in-out infinite;
  }

  .dark .typing-cursor {
    background: linear-gradient(180deg, rgb(147 197 253), rgb(103 232 249));
  }

  /* 最新字符淡入效果 */
  .typing-char-new {
    animation: text-appear 0.15s ease-out forwards;
  }

  /* 打字机容器呼吸效果 */
  .typing-container {
    position: relative;
  }

  .typing-container::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: linear-gradient(to top, var(--typing-bg, rgb(250 250 250)), transparent);
    pointer-events: none;
    opacity: 0.8;
  }

  .dark .typing-container::after {
    background: linear-gradient(to top, var(--typing-bg-dark, rgb(24 24 27)), transparent);
  }

  .shiny-text-tail {
    position: relative;
  }

  .shiny-text-tail::after {
    content: attr(data-tail);
    position: absolute;
    right: 0;
    color: color-mix(in srgb, rgb(24 24 27) 45%, transparent);

    background: linear-gradient(120deg,
        color-mix(in srgb, rgb(24 24 27) 0%, transparent) 40%,
        rgb(82 82 91) 50%,
        color-mix(in srgb, rgb(24 24 27) 0%, transparent) 60%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;

    animation: shine 1.2s linear infinite;
  }

  .dark .shiny-text-tail::after {
    color: color-mix(in srgb, rgb(250 250 250) 45%, transparent);

    background: linear-gradient(120deg,
        color-mix(in srgb, rgb(250 250 250) 0%, transparent) 40%,
        rgb(161 161 170) 50%,
        color-mix(in srgb, rgb(250 250 250) 0%, transparent) 60%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;

    animation: shine 1.2s linear infinite;
  }

  /* 渐变淡入效果（用于新字符） */
  .typing-fade-in {
    animation: fade-in-char 0.15s ease-out;
  }

  @keyframes fade-in-char {
    from {
      opacity: 0.5;
      transform: translateY(2px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .shiny-text-tail {
    position: relative;
  }

  .shiny-text-tail::after {
    content: attr(data-tail);
    position: absolute;
    right: 0;
    color: color-mix(in srgb, rgb(24 24 27) 45%, transparent);

    background: linear-gradient(120deg,
        color-mix(in srgb, rgb(24 24 27) 0%, transparent) 40%,
        rgb(82 82 91) 50%,
        color-mix(in srgb, rgb(24 24 27) 0%, transparent) 60%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;

    animation: shine 1.2s linear infinite;
  }

  .dark .shiny-text-tail::after {
    color: color-mix(in srgb, rgb(250 250 250) 45%, transparent);

    background: linear-gradient(120deg,
        color-mix(in srgb, rgb(250 250 250) 0%, transparent) 40%,
        rgb(161 161 170) 50%,
        color-mix(in srgb, rgb(250 250 250) 0%, transparent) 60%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 100%;

    animation: shine 1.2s linear infinite;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(161 161 170 / 0.7);
  }

  .dark .custom-scrollbar {
    scrollbar-color: rgb(63 63 70 / 0.5) transparent;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(63 63 70 / 0.5);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(82 82 91 / 0.7);
  }

  /* 移动端触摸优化 */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* 移动端安全区域适配 */
  @supports (padding: max(0px)) {
    body {
      padding-left: max(0px, env(safe-area-inset-left));
      padding-right: max(0px, env(safe-area-inset-right));
    }
  }

  /* 移动端平滑滚动 */
  @media (max-width: 768px) {
    * {
      -webkit-overflow-scrolling: touch;
    }
  }
}